# Telegram Ballot Guard

Telegram Ballot Guard - это бот, который помогает вам отслеживать голоса, а также вы можете уведомлять пользователей, которые проголосовали за определенный пункт.

## Особенности

- Создание опросов с несколькими вариантами ответов
- Интерактивный мастер создания опросов с пошаговыми инструкциями
- Упоминание пользователей в описании опроса
- Проверка пользователей, голосовавших за конкретные варианты в опросе
- Получение списка пользователей, проголосовавших за конкретный вариант, для упоминания в следующем опросе
- Поддержка работы в нескольких чатах одновременно
- Мультиязычный интерфейс (русский и английский языки)

## Установка

1. Клонировать репозиторий:
   ```
   git clone https://github.com/yourusername/telegram-ballot-guard.git
   cd telegram-ballot-guard
   ```

2. Установить зависимости:
   ```
   npm install
   ```

3. Создать файл .env с переменными окружения:
   ```
   BOT_TOKEN=your_telegram_bot_token
   MONGODB_URI=mongodb://localhost:27017/ballot_guard
   BOT_OWNER_ID=your_telegram_user_id
   ```

4. Запустить приложение:
   ```
   npm start
   ```

## Команды

Бот поддерживает следующие команды:

- `/start` - Приветственное сообщение
- `/help` - Показать справку по командам
- `/createpoll` - Создать новый опрос с помощью интерактивного мастера (рекомендуется)
- `/newpoll [заголовок] | [вариант 1] | [вариант 2] | ...` - Создать новый опрос текстовой командой
- `/checkvoters` - Интерактивно проверить, кто проголосовал за конкретный вариант
- `/closepoll [message_id]` - Закрыть активный опрос

## Пример использования

1. Добавьте бота в групповой чат
2. Создайте опрос одним из способов:
   
   **Интерактивный способ (рекомендуется):**
   ```
   /createpoll
   ```
   Затем следуйте инструкциям бота для создания опроса.
   
   **Или с помощью текстовой команды:**
   ```
   /newpoll Встреча завтра @user1 @user2? | Да | Нет | Может быть
   ```
3. Проверьте, кто проголосовал за конкретный вариант:
   ```
   /checkvoters
   ```
   Затем следуйте интерактивным инструкциям для выбора опроса и варианта.
4. Закройте опрос, когда закончите:
   ```
   /closepoll
   ```

Бот автоматически определяет язык пользователя на основе настроек языка в Telegram клиенте. Поддерживаются русский и английский языки.

## Структура проекта

```
telegram-ballot-guard/
├── src/
│   ├── commands/          # Обработчики команд бота
│   ├── controllers/       # Бизнес-логика
│   ├── middleware/        # Промежуточные обработчики
│   ├── models/            # Модели данных MongoDB
│   ├── locales/           # Файлы локализации (ru.js, en.js)
│   ├── utils/             # Вспомогательные утилиты
│   └── index.js           # Точка входа приложения
├── .env                   # Переменные окружения
├── .gitignore             # Игнорируемые Git файлы
├── package.json           # Конфигурация NPM
└── README.md              # Документация проекта
```

## Требования

- Node.js 14.0 или выше
- MongoDB 4.0 или выше

## Лицензия

ISC